<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Erik笑容</title>
    <style>
        #smile {            
            width: 480px;
            height: 510px;
            margin: 0 auto;

            background-image: url(./smile-face.jpg);
            background-repeat: no-repeat;
            background-position: 0 0;
            /**
                background-attachment设置为fixed才能保证background-position在 Firefox 和 Opera 中正常工作，
                但同时定位需要为absolute才能在谷歌中正常工作
            **/
            /* background-attachment: fixed;  */
        }
    </style>
</head>
<body>
    <div id="smile"></div>

    <script>
        /**
            CSS Sprite 和 定时器使用

            学习来实现一个帧动画：

            基于一个我们提供的图片，实现 IFE2016中Erik笑容的动画
            图片地址：http://ife.baidu.com/2016/static/img/erik_ce204002.jpg
            注意，依然不要使用 CSS animation，因为我们这里要学习的是使用 JavaScript 来操作 CSS，而不是为了完成这个任务。
        **/
        
        // 防止github预览闪烁问题，需要加载完毕后执行脚本
        window.onload = function(){
            let dom = document.querySelector('#smile');
            let y = 0;
            let dir = 'forward';

            setInterval(function(){
                
                dir === 'forward'?y -= 480: y +=480;
                // 采用px，则正向为向上，和传统坐标轴一致。采用百分比，则100% 100%在右下角
                dom.style.backgroundPosition = `0 ${y}px`;

                if(y === -7200){
                    dir = 'backforward'
                }

                if(y === 0) {
                    dir = 'forward'
                }
            },200)
        }

        
    </script>
</body>
</html>